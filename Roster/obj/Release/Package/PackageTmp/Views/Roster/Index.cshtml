@model List<Roster.RosterDLL.SP_GetAllRosterDetails_Result>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layoutpage.cshtml";
}

<div class="app-content" style="margin-top:70px;">
    <div class="app-title" style="margin-bottom: 12px;">
        <div>
            <h1>Roster Details</h1>
        </div>
    </div>
    @if (Model != null && Model.Count > 0)
    {
        

        <div class="row">
            <div class="clearfix"></div>
            <div class="col-md-12">
          
                <div class="tile">
                    <div>
                        @using (Html.BeginForm("Export", "Roster", FormMethod.Post))
                        {
                            <button class="btn btn-success" type="submit" id="btnExport"><i class="fa fa-fw fa-lg fa-check-circle"></i>Export To Excel</button>
                        }

                    </div>
                    <table></table>
                    <div class="form-group row table-responsive">


                        <table class="table table-hover table-bordered " id="sampleTable">
                           
                            <thead>
                                <tr>
                                    @if (Convert.ToInt32(Session["MemberRole"]) == 1 || Convert.ToInt32(Session["MemberRole"]) == 2)
                                    {
                                        <th>Edit</th>
                                        <th>delete</th>
                                    }
                                    <th>Employee Name</th>
                                    @if (Convert.ToInt32(Session["MemberRole"]) != 4)
                                    {
                                        <th>Immigration Status</th>
                                        <th>Employment Basis</th>
                                    }
                                    <th>Phone No</th>
                                    <th>Employee Email ID</th>
                                    <th>Contract Start Date</th>
                                    <th>Contract End Dates</th>
                                    <th>Billable/NB</th>
                                    <th>Client</th>
                                    <th>Client Manager Name</th>
                                    <th>Client Email ID</th>
                                    <th>Skills</th>
                                    <th>Continuity With Us</th>
                                    <th>Remote</th>
                                    <th>Expenses Applicable </th>
                                    <th>Expense Frequency</th>
                                    <th>Payroll Frequency</th>
                                    <th>Business Name</th>
                                    <th>Business Contact name</th>
                                    <th>Vendor(Y/N)</th>
                                    @if (Convert.ToInt32(Session["MemberRole"]) == 4)
                                    {
                                        <th>Bill Rate</th>
                                    }
                                    @if (Convert.ToInt32(Session["MemberRole"]) == 5)
                                    {
                                        <th>Hourly Rate</th>
                                        <th>Bill Rate</th>

                                    }
                                    @if (Convert.ToInt32(Session["MemberRole"]) == 1 || Convert.ToInt32(Session["MemberRole"]) == 2)
                                    {
                                        <th>Salary</th>
                                        <th>Hourly Rate</th>
                                        <th>Overhead Cost</th>
                                        <th>Overhead Percentage</th>
                                        <th>Loaded Cost</th>
                                        <th>Medical(Hourly Cost)</th>
                                        <th>Sick Leave(Hourly Cost)</th>
                                        <th>Other Expenses(Hourly Cost)</th>
                                        <th>Total Cost</th>
                                        <th>Bill Rate</th>
                                        <th>Gross Margin</th>
                                        <th>PO</th>
                                        <th>PO Effective Date</th>
                                        <th>Total SOW Value</th>
                                    }
                                </tr>
                            </thead>

                            <tbody>
                                @foreach (var item in Model)
                                {
                                <tr>
                                    @if (Convert.ToInt32(Session["MemberRole"]) == 1 || Convert.ToInt32(Session["MemberRole"]) == 2)
                                    {
                                        <td><a href="~/Roster/GetRosterbyId?roster_id=@item.roster_id" class="fa fa-edit"></a></td>
                                    }
                                    @if (Convert.ToInt32(Session["MemberRole"]) == 1 || Convert.ToInt32(Session["MemberRole"]) == 2)
                                    {
                                        <td><a href="~/Roster/DeleteRoster?roster_id=@item.roster_id" class="fa fa-trash"></a></td>
                                    }

                                    @*  <td>@Html.ActionLink("Edit", "GetRosterbyId", "Roster", new { roster_id = @item.roster_id }, new { @class = "fa fa-edit" })</td>*@
                                    <td>@item.employee_name</td>
                                    @if (Convert.ToInt32(Session["MemberRole"]) != 4)
                                    {
                                        <td>@item.immigration_status</td>
                                        <td>@item.employment_basis</td>
                                    }
                                    <td>@item.phone_no</td>
                                    <td>@item.empolyee_email_id</td>
                                    <td>
                                        @if (@item.contract_start_date != null)
                                        {@($"{@item.contract_start_date:MM/dd/yyyy}")}
                                    </td>
                                    <td>
                                        @if (@item.contract_end_date != null)
                                        {@($"{@item.contract_end_date:MM/dd/yyyy}")}
                                    </td>
                                    <td>@item.billable</td>
                                    <td>@item.client</td>
                                    <td>@item.client_manager_name</td>
                                    <td>@item.client_email_id</td>
                                    <td>@item.skills</td>
                                    <td>@item.continuity_with_us</td>
                                    <td>@item.remote</td>
                                    <td>@item.expenses_applicable</td>
                                    <td>@item.expenses_weekly_or_monthly</td>
                                    <td>@item.payroll</td>
                                    <td>@item.business_name</td>
                                    <td>@item.business_contact_name</td>
                                    <td>@item.vendor</td>
                                    @if (Convert.ToInt32(Session["MemberRole"]) == 4)
                                    {
                                        <td>
                                            @if (@item.bill_rate != null)
                                            {@($"{@item.bill_rate:0.00}")}
                                        </td>
                                    }
                                    @if (Convert.ToInt32(Session["MemberRole"]) == 5)
                                    {
                                        <td>
                                            @if (@item.hourly_cost != null)
                                            {@($"{@item.hourly_cost:0.00}")}
                                        </td>
                                        <td>
                                            @if (@item.bill_rate != null)
                                            {@($"{@item.bill_rate:0.00}")}
                                        </td>

                                    }
                                    @if (Convert.ToInt32(Session["MemberRole"]) == 1 || Convert.ToInt32(Session["MemberRole"]) == 2)
                                    {
                                        <td>
                                            @if (@item.salary_or_hourly_rate != null)
                                            {@($"{@item.salary_or_hourly_rate:0.00}")}
                                        </td>
                                        <td>
                                            @if (@item.hourly_cost != null)
                                            {@($"{@item.hourly_cost:0.00}")}
                                        </td>
                                        <td>
                                            @if (@item.over_head != null)
                                            {@($"{@item.over_head:0.00}")}
                                        </td>
                                        <td>@item.overhead_per</td>
                                        <td>
                                            @if (@item.loaded_cost != null)
                                            {@($"{@item.loaded_cost:0.00}")}
                                        </td>
                                        <td>
                                            @if (@item.medical != null)
                                            {@($"{@item.medical:0.00}")}
                                        </td>
                                        <td>
                                            @if (@item.sick_leave_cost != null)
                                            {@($"{@item.sick_leave_cost:0.00}")}
                                        </td>
                                        <td>
                                            @if (@item.other_expenses != null)
                                            {@($"{@item.other_expenses:0.00}")}
                                        </td>
                                        <td>
                                            @if (@item.total_cost != null)
                                            {@($"{@item.total_cost:0.00}")}
                                        </td>

                                        <td>
                                            @if (@item.bill_rate != null)
                                            {@($"{@item.bill_rate:0.00}")}
                                        </td>
                                        <td>
                                            @if (@item.gross_margin != null)
                                            {@($"{@item.gross_margin:0.00}")}
                                        </td>

                                        <td>@item.po</td>
                                        <td>
                                            @if (@item.po_effective_date != null)
                                            {@($"{@item.po_effective_date:MM/dd/yyyy}")}


                                        </td>
                                        <td>
                                            @if (@item.total_sow_value != null)
                                            {@($"{@item.total_sow_value:0.00}")}
                                        </td>
                                    }
                                </tr>
                                }

                            </tbody>
                          
                        </table>
                    </div>
                </div>

            </div>
        </div>
    }

</div>

@section js{
    
    <!-- Data table plugin-->
    <script type="text/javascript" src="~/Template/js/plugins/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="~/Template/js/plugins/dataTables.bootstrap.min.js"></script>
    <script type="text/javascript">
        $('#sampleTable').DataTable(
            { });
    </script>
    <script src="~/Scripts/CustomFunction.js"></script>
}